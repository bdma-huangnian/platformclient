(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{c5Gi:function(n,l,t){"use strict";t.r(l);var o=t("LY6o");console.log("%c%s","color: #00b300","Infomation Module Is Loaded");class e{}var i=t("/WN3"),u=t("usba"),a=t("CX4n"),c=t("b16g"),s=t("2BiU"),r=t("kGhL"),d=t("KAEX"),g=t("3JjO"),b=t("D2kv"),p=t("DCY/");class h{constructor(n,l,t,o){this.request=n,this.authenticationSellerService=l,this.http=t,this.app=o}getInfomation(){return new Promise((n,l)=>{this.request.get(s.a.checkMobileBind).pipe(Object(r.a)(n=>(401===n.status?(this.authenticationSellerService.logout(),u.a.miniProgram.navigateTo({url:"/page/login/login?url="+window.location.href})):1!==n.status&&l(n.msg),1===n.status)),Object(d.a)(n=>n.data)).subscribe(l=>{n(l)})})}sendCode(n){return new Promise(l=>{const t=new g.g({fromObject:{phone:n,company_id:this.app.companyId,type:"binding"}});this.http.get(p.b.getMobileCheckCode,{params:t}).subscribe(n=>{l(n)})})}binding(n){return new Promise((l,t)=>{this.request.get(s.a.bindingMobile,{name:n.name,phone:n.mobile||"",code:n.code||""}).pipe(Object(r.a)(n=>(401===n.status&&(this.authenticationSellerService.logout(),u.a.miniProgram.navigateTo({url:"/page/login/login?url="+window.location.href})),!0))).subscribe(n=>{l(n.msg)})})}}var m=t("oxV5");class C{constructor(n,l,t,o,e,i){this.loadingController=n,this.app=l,this.authenticationSellerService=t,this.infomationService=o,this.alertController=e,this.countDown=i,this.seconds=null,this.logged=!1,this.alreadyBinding=!0,this.authenticationSellerService.getToken.subscribe(n=>{this.logged=Boolean(n)})}ngOnInit(){return i.__awaiter(this,void 0,void 0,(function*(){const n=yield this.loadingController.create();n.present(),this.infomationService.getInfomation().then(({mobile:l,profile_name:t})=>{n.dismiss(),this.alreadyBinding=!0,this.mobile=l,this.name=t}).catch(()=>{n.dismiss(),this.alreadyBinding=!1})}))}sendCode(){return i.__awaiter(this,void 0,void 0,(function*(){if(!/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/.test(this.mobile))return void this.alert("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7");const n=yield this.loadingController.create();n.present(),this.infomationService.sendCode(this.mobile).then(n=>{1===n.status?this.countDown.countDownSeconds(60).subscribe(n=>{this.seconds=n}):this.alert(n.info)}).finally(()=>n.dismiss())}))}binding(){return i.__awaiter(this,void 0,void 0,(function*(){if(!this.logged)return void u.a.miniProgram.navigateTo({url:"/page/login/login?url="+window.location.href});if(!Boolean(this.name))return void this.alert("\u8bf7\u8f93\u5165\u59d3\u540d");if(this.code.length<6)return void this.alert("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u9a8c\u8bc1\u7801");const n=yield this.loadingController.create();n.present();const l={name:this.name};this.alreadyBinding||(l.mobile=this.mobile,l.code=this.code),this.infomationService.binding(l).then(l=>{n.dismiss(),this.alreadyBinding=!0,this.alert(l)})}))}alert(n){return new Promise(l=>{this.alertController.create({header:n,buttons:[{text:"\u53d6\u6d88",role:"cancel"}]}).then(n=>{n.present(),n.onWillDismiss().then(()=>l())})})}}var v=t("pMnS"),M=t("MKJQ"),P=t("ysn3"),_=t("pwXF"),f=t("2jpv"),O=o.ob({encapsulation:0,styles:[["ion-content[_ngcontent-%COMP%]{position:relative;z-index:10}ion-content[_ngcontent-%COMP%]   div.content[_ngcontent-%COMP%]{width:100vw;height:100%;display:flex;flex-direction:column}ion-content[_ngcontent-%COMP%]   div.content[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{width:100%;height:100px;padding:10px 0;position:relative}ion-content[_ngcontent-%COMP%]   div.content[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;-o-object-fit:contain;object-fit:contain}ion-content[_ngcontent-%COMP%]   div.content[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{position:absolute;right:0;top:0;z-index:1;--border-radius:0}ion-content[_ngcontent-%COMP%]   div.content[_ngcontent-%COMP%]   ion-text.label[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   div.content[_ngcontent-%COMP%]   ion-text.tips[_ngcontent-%COMP%]{vertical-align:middle;font-size:16px;display:flex;align-items:center;justify-content:center;padding-bottom:10px}ion-content[_ngcontent-%COMP%]   div.content[_ngcontent-%COMP%]   ion-text.label[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   div.content[_ngcontent-%COMP%]   ion-text.tips[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{vertical-align:middle;height:18px;width:18px;margin-right:5px}ion-content[_ngcontent-%COMP%]   div.content[_ngcontent-%COMP%]   ion-text.tips[_ngcontent-%COMP%]{font-size:13px;color:#c9c9c9}ion-content[_ngcontent-%COMP%]   div.content[_ngcontent-%COMP%]   div.main[_ngcontent-%COMP%]{flex:1;overflow:auto;border-top:1px solid #e4e4e4}ion-content[_ngcontent-%COMP%]   div.content[_ngcontent-%COMP%]   div.main[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{margin:0 10vw;--padding-start:10px}ion-content[_ngcontent-%COMP%]   div.content[_ngcontent-%COMP%]   div.main[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]:first-child{margin-top:15px}ion-content[_ngcontent-%COMP%]   div.content[_ngcontent-%COMP%]   div.main[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   div.primary-border[_ngcontent-%COMP%]{width:100%;height:35px;margin-top:10px;line-height:35px;border-width:1px;border-style:solid;border-radius:3px;padding:0 15px;font-size:14px;display:flex;align-items:center}ion-content[_ngcontent-%COMP%]   div.content[_ngcontent-%COMP%]   div.main[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   div.primary-border[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--padding-top:0;--padding-bottom:0;height:20px;line-height:20px;font-size:14px}ion-content[_ngcontent-%COMP%]   div.content[_ngcontent-%COMP%]   div.main[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{flex:1;height:35px;font-size:14px}ion-content[_ngcontent-%COMP%]   div.content[_ngcontent-%COMP%]   div.main[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}ion-content[_ngcontent-%COMP%]   div.content[_ngcontent-%COMP%]   div.footer[_ngcontent-%COMP%]{padding-bottom:15px}ion-content[_ngcontent-%COMP%]   div.content[_ngcontent-%COMP%]   div.footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:0 25vw 15px;height:35px;--border-radius:5px;font-size:14px}ion-menu[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:10px}"]],data:{}});function x(n){return o.Lb(0,[(n()(),o.qb(0,0,null,null,2,"ion-text",[["class","link"],["color","primary"]],null,[[null,"click"]],(function(n,l,t){var o=!0;return"click"===l&&(o=!1!==n.component.sendCode()&&o),o}),M.Pb,M.S)),o.pb(1,49152,null,0,P.ub,[o.h,o.k,o.x],{color:[0,"color"]},null),(n()(),o.Jb(-1,0,[" \u7acb\u5373\u83b7\u53d6 "]))],(function(n,l){n(l,1,0,"primary")}),null)}function B(n){return o.Lb(0,[(n()(),o.qb(0,0,null,null,2,"ion-text",[["class","link"],["color","medium"]],null,null,null,M.Pb,M.S)),o.pb(1,49152,null,0,P.ub,[o.h,o.k,o.x],{color:[0,"color"]},null),(n()(),o.Jb(2,0,[" ","s "]))],(function(n,l){n(l,1,0,"medium")}),(function(n,l){n(l,2,0,l.component.seconds)}))}function k(n){return o.Lb(0,[(n()(),o.qb(0,0,null,null,19,"ion-item",[["class","ion-no-padding"],["lines","none"]],null,null,null,M.vb,M.w)),o.pb(1,49152,null,0,P.H,[o.h,o.k,o.x],{lines:[0,"lines"]},null),(n()(),o.qb(2,0,null,0,5,"ion-label",[["position","stacked"]],null,null,null,M.wb,M.z)),o.pb(3,49152,null,0,P.N,[o.h,o.k,o.x],{position:[0,"position"]},null),(n()(),o.qb(4,0,null,0,2,"ion-text",[["color","danger"]],null,null,null,M.Pb,M.S)),o.pb(5,49152,null,0,P.ub,[o.h,o.k,o.x],{color:[0,"color"]},null),(n()(),o.Jb(-1,0,["* "])),(n()(),o.Jb(-1,0,["\u9a8c\u8bc1\u7801"])),(n()(),o.qb(8,0,null,0,11,"div",[["class","primary-border"]],null,null,null,null,null)),(n()(),o.qb(9,0,null,null,6,"ion-input",[["class","ion-no-padding"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(n,l,t){var e=!0,i=n.component;return"ionBlur"===l&&(e=!1!==o.Bb(n,10)._handleBlurEvent(t.target)&&e),"ionChange"===l&&(e=!1!==o.Bb(n,10)._handleInputEvent(t.target)&&e),"ngModelChange"===l&&(e=!1!==(i.code=t)&&e),e}),M.sb,M.v)),o.pb(10,4341760,null,0,P.Mb,[o.p,o.k],null,null),o.Gb(1024,null,_.e,(function(n){return[n]}),[P.Mb]),o.pb(12,671744,null,0,_.j,[[8,null],[8,null],[8,null],[6,_.e]],{model:[0,"model"]},{update:"ngModelChange"}),o.Gb(2048,null,_.f,null,[_.j]),o.pb(14,16384,null,0,_.g,[[4,_.f]],null,null),o.pb(15,49152,null,0,P.G,[o.h,o.k,o.x],null,null),(n()(),o.fb(16777216,null,null,1,null,x)),o.pb(17,16384,null,0,f.j,[o.M,o.J],{ngIf:[0,"ngIf"]},null),(n()(),o.fb(16777216,null,null,1,null,B)),o.pb(19,16384,null,0,f.j,[o.M,o.J],{ngIf:[0,"ngIf"]},null)],(function(n,l){var t=l.component;n(l,1,0,"none"),n(l,3,0,"stacked"),n(l,5,0,"danger"),n(l,12,0,t.code),n(l,17,0,!t.seconds),n(l,19,0,t.seconds)}),(function(n,l){n(l,9,0,o.Bb(l,14).ngClassUntouched,o.Bb(l,14).ngClassTouched,o.Bb(l,14).ngClassPristine,o.Bb(l,14).ngClassDirty,o.Bb(l,14).ngClassValid,o.Bb(l,14).ngClassInvalid,o.Bb(l,14).ngClassPending)}))}function w(n){return o.Lb(0,[(n()(),o.qb(0,0,null,null,49,"ion-content",[],null,null,null,M.ib,M.l)),o.pb(1,49152,null,0,P.u,[o.h,o.k,o.x],null,null),(n()(),o.qb(2,0,null,0,47,"div",[["class","content"]],null,null,null,null,null)),(n()(),o.qb(3,0,null,null,4,"ion-text",[["class","label"],["color","medium"]],null,null,null,M.Pb,M.S)),o.pb(4,49152,null,0,P.ub,[o.h,o.k,o.x],{color:[0,"color"]},null),(n()(),o.qb(5,0,null,0,1,"ion-icon",[["name","person-outline"]],null,null,null,M.ob,M.r)),o.pb(6,49152,null,0,P.C,[o.h,o.k,o.x],{name:[0,"name"]},null),(n()(),o.Jb(-1,0,["\u4e2a\u4eba\u8d44\u6599 "])),(n()(),o.qb(8,0,null,null,2,"ion-text",[["class","tips"]],null,null,null,M.Pb,M.S)),o.pb(9,49152,null,0,P.ub,[o.h,o.k,o.x],null,null),(n()(),o.Jb(-1,0,[" \u6211\u4eec\u4fdd\u8bc1\uff0c\u7edd\u4e0d\u4f1a\u5411\u7b2c\u4e09\u65b9\u900f\u9732\u60a8\u7684\u8d44\u6599\u4fe1\u606f "])),(n()(),o.qb(11,0,null,null,34,"div",[["class","main"]],null,null,null,null,null)),(n()(),o.qb(12,0,null,null,15,"ion-item",[["class","ion-no-padding"],["lines","none"]],null,null,null,M.vb,M.w)),o.pb(13,49152,null,0,P.H,[o.h,o.k,o.x],{lines:[0,"lines"]},null),(n()(),o.qb(14,0,null,0,5,"ion-label",[["position","stacked"]],null,null,null,M.wb,M.z)),o.pb(15,49152,null,0,P.N,[o.h,o.k,o.x],{position:[0,"position"]},null),(n()(),o.qb(16,0,null,0,2,"ion-text",[["color","danger"]],null,null,null,M.Pb,M.S)),o.pb(17,49152,null,0,P.ub,[o.h,o.k,o.x],{color:[0,"color"]},null),(n()(),o.Jb(-1,0,["* "])),(n()(),o.Jb(-1,0,["\u59d3\u540d"])),(n()(),o.qb(20,0,null,0,7,"div",[["class","primary-border"]],null,null,null,null,null)),(n()(),o.qb(21,0,null,null,6,"ion-input",[["class","ion-no-padding"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(n,l,t){var e=!0,i=n.component;return"ionBlur"===l&&(e=!1!==o.Bb(n,22)._handleBlurEvent(t.target)&&e),"ionChange"===l&&(e=!1!==o.Bb(n,22)._handleInputEvent(t.target)&&e),"ngModelChange"===l&&(e=!1!==(i.name=t)&&e),e}),M.sb,M.v)),o.pb(22,4341760,null,0,P.Mb,[o.p,o.k],null,null),o.Gb(1024,null,_.e,(function(n){return[n]}),[P.Mb]),o.pb(24,671744,null,0,_.j,[[8,null],[8,null],[8,null],[6,_.e]],{model:[0,"model"]},{update:"ngModelChange"}),o.Gb(2048,null,_.f,null,[_.j]),o.pb(26,16384,null,0,_.g,[[4,_.f]],null,null),o.pb(27,49152,null,0,P.G,[o.h,o.k,o.x],null,null),(n()(),o.qb(28,0,null,null,15,"ion-item",[["class","ion-no-padding"],["lines","none"]],null,null,null,M.vb,M.w)),o.pb(29,49152,null,0,P.H,[o.h,o.k,o.x],{lines:[0,"lines"]},null),(n()(),o.qb(30,0,null,0,5,"ion-label",[["position","stacked"]],null,null,null,M.wb,M.z)),o.pb(31,49152,null,0,P.N,[o.h,o.k,o.x],{position:[0,"position"]},null),(n()(),o.qb(32,0,null,0,2,"ion-text",[["color","danger"]],null,null,null,M.Pb,M.S)),o.pb(33,49152,null,0,P.ub,[o.h,o.k,o.x],{color:[0,"color"]},null),(n()(),o.Jb(-1,0,["* "])),(n()(),o.Jb(-1,0,["\u624b\u673a\u53f7\u7801"])),(n()(),o.qb(36,0,null,0,7,"div",[["class","primary-border"]],null,null,null,null,null)),(n()(),o.qb(37,0,null,null,6,"ion-input",[["class","ion-no-padding"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(n,l,t){var e=!0,i=n.component;return"ionBlur"===l&&(e=!1!==o.Bb(n,38)._handleBlurEvent(t.target)&&e),"ionChange"===l&&(e=!1!==o.Bb(n,38)._handleInputEvent(t.target)&&e),"ngModelChange"===l&&(e=!1!==(i.mobile=t)&&e),e}),M.sb,M.v)),o.pb(38,4341760,null,0,P.Mb,[o.p,o.k],null,null),o.Gb(1024,null,_.e,(function(n){return[n]}),[P.Mb]),o.pb(40,671744,null,0,_.j,[[8,null],[8,null],[8,null],[6,_.e]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),o.Gb(2048,null,_.f,null,[_.j]),o.pb(42,16384,null,0,_.g,[[4,_.f]],null,null),o.pb(43,49152,null,0,P.G,[o.h,o.k,o.x],{disabled:[0,"disabled"]},null),(n()(),o.fb(16777216,null,null,1,null,k)),o.pb(45,16384,null,0,f.j,[o.M,o.J],{ngIf:[0,"ngIf"]},null),(n()(),o.qb(46,0,null,null,3,"div",[["class","footer"]],null,null,null,null,null)),(n()(),o.qb(47,0,null,null,2,"ion-button",[["class","ion-no-margin"],["color","primary"],["expand","block"],["mode","ios"]],null,[[null,"click"]],(function(n,l,t){var o=!0;return"click"===l&&(o=!1!==n.component.binding()&&o),o}),M.bb,M.e)),o.pb(48,49152,null,0,P.k,[o.h,o.k,o.x],{color:[0,"color"],expand:[1,"expand"],mode:[2,"mode"]},null),(n()(),o.Jb(-1,0,[" \u4fdd\u5b58 "]))],(function(n,l){var t=l.component;n(l,4,0,"medium"),n(l,6,0,"person-outline"),n(l,13,0,"none"),n(l,15,0,"stacked"),n(l,17,0,"danger"),n(l,24,0,t.name),n(l,29,0,"none"),n(l,31,0,"stacked"),n(l,33,0,"danger"),n(l,40,0,t.alreadyBinding,t.mobile),n(l,43,0,t.alreadyBinding),n(l,45,0,!t.alreadyBinding),n(l,48,0,"primary","block","ios")}),(function(n,l){n(l,21,0,o.Bb(l,26).ngClassUntouched,o.Bb(l,26).ngClassTouched,o.Bb(l,26).ngClassPristine,o.Bb(l,26).ngClassDirty,o.Bb(l,26).ngClassValid,o.Bb(l,26).ngClassInvalid,o.Bb(l,26).ngClassPending),n(l,37,0,o.Bb(l,42).ngClassUntouched,o.Bb(l,42).ngClassTouched,o.Bb(l,42).ngClassPristine,o.Bb(l,42).ngClassDirty,o.Bb(l,42).ngClassValid,o.Bb(l,42).ngClassInvalid,o.Bb(l,42).ngClassPending)}))}function y(n){return o.Lb(0,[(n()(),o.qb(0,0,null,null,3,"app-infomation",[],null,null,null,w,O)),o.Gb(512,null,h,h,[c.a,a.a,g.c,b.a]),o.Gb(512,null,m.a,m.a,[]),o.pb(3,114688,null,0,C,[P.Cb,b.a,a.a,h,P.a,m.a],null,null)],(function(n,l){n(l,3,0)}),null)}var q=o.mb("app-infomation",C,y,{},{},[]),z=t("l0Bj"),j=t("ADsi");t.d(l,"InfomationModuleNgFactory",(function(){return S}));var S=o.nb(e,[C],(function(n){return o.yb([o.zb(512,o.j,o.X,[[8,[v.a,q]],[3,o.j],o.v]),o.zb(4608,f.l,f.k,[o.s,[2,f.w]]),o.zb(4608,_.m,_.m,[]),o.zb(4608,P.b,P.b,[o.x,o.g]),o.zb(4608,P.Eb,P.Eb,[P.b,o.j,o.p]),o.zb(4608,P.Ib,P.Ib,[P.b,o.j,o.p]),o.zb(1073742336,f.b,f.b,[]),o.zb(1073742336,_.l,_.l,[]),o.zb(1073742336,_.b,_.b,[]),o.zb(1073742336,P.Bb,P.Bb,[]),o.zb(1073742336,z.r,z.r,[[2,z.w],[2,z.n]]),o.zb(1073742336,j.a,j.a,[]),o.zb(1073742336,e,e,[]),o.zb(1024,z.l,(function(){return[[{path:"",component:C}]]}),[])])}))}}]);